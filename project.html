<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="images/xiyoulinux.png">
    <title>西邮Linux兴趣小组</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/project.css">
    <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation" id="header">
    <script>
        $(function () {
            $("#header").load("header.html");
        })
    </script>
</div>


<div class="container" style="margin-top: 80px">
    <div class="content">
        <div class="row">
            <div class="center-block">
                <table border="0" id="projects_list">
                    <tr>
                        <td>
                            <dl>
                                <dt class="product">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">
                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员小红作品务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>

                        <td>
                            <dl>
                                <dt class="product">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">

                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成便捷的服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>

                        <td>
                            <dl>
                                <dt class="product">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">

                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员更加便捷的服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>

                        <td>
                            <dl>
                                <dt class="product">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">

                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员小红便捷的服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>
                    </tr>

                    <tr>
                        <td>
                            <dl>
                                <dt style="text-align:center; width: 270px">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">

                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员小便捷的服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>

                        <td>
                            <dl>
                                <dt style="text-align:center; width: 270px">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">

                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员小红作便捷的服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>

                        <td>
                            <dl>
                                <dt style="text-align:center; width: 270px">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">

                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员小服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>

                        </td>

                        <td>
                            <dl>
                                <dt style="text-align:center; width: 270px">
                                    <a class="popup-with-zoom-anim" href="projectdetail.html">
                                        <img src="images/pic3.jpg" alt="Image 2" class="product_image"/>
                                    </a>
                                    <h3>小组app1</h3>
                                    <p class="para">小组成员小红作品，便捷的服务</p>
                                    <h4><a class="popup-with-zoom-anim" href="projectdetail.html">app制作</a></h4>
                                </dt>
                            </dl>
                        </td>
                    </tr>
                </table>
                <div id="black">

                </div>
            </div>
        </div>
    </div>
</div>

<div class="main_bg">
    <div class="wrap">
        <div class="main">

        </div>
    </div>
</div>


<!--网站底部1-->
<footer id="footer">
    <script>
        $(function () {
            $("#footer").load("footer.html");
        })
    </script>
</footer>
<!--网站底部2-->


<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/retina-1.1.0.js"></script>
<script type="text/javascript" src="js/jquery.hoverdir.js"></script>
<script type="text/javascript" src="js/jquery.hoverex.min.js"></script>
<script type="text/javascript" src="js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="js/jquery.isotope.min.js"></script>
<script type="text/javascript" src="js/custom.js"></script>
<script type="text/javascript" src="js/main.js"></script>

<script type="text/javascript">
    function load_project_data() {
        $.ajax({
            type: 'GET',
            url: '/apis/projects/?page_size=100&page=1&status=1',
            data: {},
            success: function (data, result) {
                if ("success" == result){
                    let json = JSON.parse(data);
                    let projects = json.data;
                    let innerHTML = "";
                    $('#projects_list').empty();
                    for (let i=0; i <projects.length; i++){
                        if(i%4 == 0){
                            if (i==0){
                                innerHTML += "<tr>"
                            }else{
                                innerHTML += "</tr><tr>"
                            }
                        }
                        innerHTML += "<td>" +
                            "<dl>" +
                            "<dt style=\"text-align:center; width: 270px\">" +
                            "<a class=\"popup-with-zoom-anim\" href=\"projectdetail.html?id="+ projects[i].pid + "\">"+
                            "<img src=\"" + resolve_poster(projects[i].poster)  +"\" alt=\""+ projects[i].title +"\" class=\"product_image\"/ style=\"width: 200px; height: 170px;\" >" +
                            "</a>" +
                            "<h3><a class=\"popup-with-zoom-anim\" href=\"projectdetail.html?id="+ projects[i].pid +"\">" + projects[i].title + "</a></h3>" +
                            "</dt>" +
                            "</dl>" +
                            "</td>";
                    }
                    innerHTML += "</tr>";
                    $('#projects_list').append(innerHTML);
                    let lines = projects.length / 4;
                    if(projects.length % 4 != 0){
                        lines ++;
                    }
                    if( lines < 3){
                        innerHTML="";
                        for(let i=0; i < 3-lines; i++){
                            innerHTML += "<br/><br/><br/><br/><br/><br/><br/><br/><br/>";
                        }
                        $('#black').append(innerHTML)
                    }
                } else {
                    alert("error!")
                }
            }
        });
    }

    function resolve_poster(link) {
        if(link.search('http') >= 0 || link.search('https') >= 0){
            return link;
        }else{
            return '/apis' + link
        }
    }


    $(document).ready(function () {
        load_project_data();
    })
</script>
<script type="text/javascript">

    $(document).ready(function () {
        var today = function () {
            var pad = function (number) {
                var r = String(number);
                if (r.length === 1) {
                    r = '0' + r;
                }
                return r;
            };
            var _today = new Date();
            return Date.parse(
                _today.getFullYear().toString() + "-"
                + pad(_today.getMonth() + 1) + "-"
                + pad(_today.getDate())
            );
        }();
        $('#recent-events .event').each(function () {
            var event_date = Date.parse($(this).attr("data-event-date")),
                label = "";
            if (today > event_date) {
                label = "<span class='label label-default'>Finished</span>";
            } else if (today < event_date) {
                label = "<span class='label label-warning'>Upcoming</span>";
            } else {
                label = "<span class='label label-primary'>Finishing</span>";
            }
            $(this).find(".event-meta").append(label);
        });
        $('.container .copy-right-content').each(function () {
            var year = new Date().getFullYear();
            $(this).find(".year").append(year);
        })
    });
</script>
</body>
</html>s